{"version":3,"sources":["webpack:///charts.js","webpack:///webpack/bootstrap 286344a8dc12b1fd0bb6","webpack:///./src/charts.js","webpack:///./~/querystring/decode.js","webpack:///./~/querystring/encode.js","webpack:///./~/querystring/index.js","webpack:///./src/object-keys-polyfill.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","chart","type","title","data","xAxisType","xAxisTitle","cats","Highcharts","Chart","renderTo","zoomType","text","style","color","subtitle","document","ontouchstart","exporting","enableImages","credits","enabled","xAxis","maxZoom","lineColor","categories","yAxis","min","startOnTick","showFirstLabel","tooltip","shared","legend","plotOptions","column","borderWidth","pointPadding","shadow","line","lineWidth","marker","radius","series","name","totalDownloads","result","date","toString","replace","sanitizeData","json","downloads","i","length","day","getDailyData","keys","Object","sort","push","Date","getTime","getWeekOfDate","d","Math","floor","getWeeklyData","dailyData","record","lastWeek","weekTotal","week","getMonthlyData","lastMonth","getMonth","lastYear","getFullYear","monthTotal","months","getAnnualData","yearTotal","getPackageList","len","rows","key","getData","url","callback","$","ajax","dataType","success","error","console","log","html","padNumberZero","x","dateToString","getDate","downloadsUrl","pkg","from","to","encodeURIComponent","drawCharts","find","css","weeklyData","monthlyData","annualData","showPackageStats","packageName","fromDate","toDate","append","$nameType","val","after","remove","showAuthorStats","authorName","pkgs","todo","all","totals","sanitized","total","count","a","b","$pkgs","t","initDate","urlParams","baseDate","e","alert","querystring","change","attr","replaceWith","decode","window","location","search","substring","submitForm","formData","encode","hasOwnProperty","obj","prop","prototype","qs","sep","eq","options","regexp","split","maxKeys","kstr","vstr","k","v","idx","indexOf","substr","decodeURIComponent","Array","isArray","stringifyPrimitive","isFinite","undefined","map","ks","join","parse","stringify","hasDontEnumBug","propertyIsEnumerable","dontEnums","dontEnumsLength","TypeError"],"mappings":"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","file":"charts.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/*!\n\t * (c) 2012-2016 Paul Vorbach.\n\t *\n\t * MIT License (https://vorba.ch/license/mit.html)\n\t */\n\t\n\tvar querystring = __webpack_require__(3);\n\t\n\t__webpack_require__(4);\n\t\n\tvar $nameType = $('<select id=\"nameType\">\\n'\n\t    + '    <option value=\"package\" selected>Package</option>\\n'\n\t    + '    <option value=\"author\">Author</option>\\n'\n\t    + '</select>');\n\t\n\t$nameType.change(function () {\n\t    if ($nameType.val() == 'package') {\n\t        $('#name').attr('name', 'package').attr('placeholder', 'package name');\n\t    } else if ($nameType.val() == 'author') {\n\t        $('#name').attr('name', 'author').attr('placeholder', 'author name');\n\t    }\n\t});\n\t\n\tfunction chart(id, type, title, data, xAxisType, xAxisTitle, cats) {\n\t    return new Highcharts.Chart({\n\t        chart: {\n\t            renderTo: id,\n\t            zoomType: 'x',\n\t            type: type\n\t        },\n\t        title: {\n\t            text: title,\n\t            style: {\n\t                color: '#000000'\n\t            }\n\t        },\n\t        subtitle: {\n\t            text: typeof document.ontouchstart == 'undefined' ?\n\t                'Click and drag in the plot to zoom in' :\n\t                'Drag your finger over the plot to zoom in',\n\t            style: {\n\t                color: '#000000'\n\t            }\n\t        },\n\t        exporting: {\n\t            enableImages: true\n\t        },\n\t        credits: {\n\t            enabled: false\n\t        },\n\t        xAxis: (xAxisType == 'datetime' ? {\n\t            type: xAxisType,\n\t            maxZoom: 14 * 24 * 60 * 60 * 1000,\n\t            lineColor: '#000000',\n\t            title: {\n\t                text: xAxisTitle,\n\t                style: {\n\t                    color: '#000000'\n\t                }\n\t            }\n\t        } : {\n\t            type: xAxisType,\n\t            lineColor: '#000000',\n\t            categories: cats,\n\t            title: {\n\t                text: xAxisTitle,\n\t                style: {\n\t                    color: '#000000'\n\t                }\n\t            }\n\t        }),\n\t        yAxis: {\n\t            min: 0,\n\t            startOnTick: false,\n\t            showFirstLabel: false,\n\t            title: {\n\t                text: 'Downloads',\n\t                style: {\n\t                    color: '#000000'\n\t                }\n\t            }\n\t        },\n\t        tooltip: {\n\t            shared: true\n\t        },\n\t        legend: {\n\t            enabled: false\n\t        },\n\t        plotOptions: {\n\t            column: {\n\t                borderWidth: 0,\n\t                color: '#AA0000',\n\t                pointPadding: 0,\n\t                shadow: false\n\t            },\n\t            line: {\n\t                color: '#AA0000',\n\t                lineWidth: 1,\n\t                marker: {\n\t                    radius: 2\n\t                }\n\t            }\n\t        },\n\t        series: [{\n\t            name: 'Downloads',\n\t            data: data\n\t        }]\n\t    });\n\t}\n\t\n\tfunction totalDownloads(data) {\n\t    var result = 0;\n\t    for (var date in data) {\n\t        result += data[date];\n\t    }\n\t    return result.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n\t}\n\t\n\tfunction sanitizeData(json) {\n\t    var result = {};\n\t    var data = json.downloads;\n\t\n\t    var date = null;\n\t    if (data) {\n\t        for (var i = 0; i < data.length; i++) {\n\t            date = data[i].day;\n\t            result[date] = data[i].downloads;\n\t        }\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction getDailyData(data) {\n\t    var result = [];\n\t\n\t    var keys = Object.keys(data).sort();\n\t    for (var i = 0; i < keys.length; i++) {\n\t        result.push([new Date(keys[i]).getTime(), data[keys[i]]]);\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction getWeekOfDate(d) {\n\t    return Math.floor(((d.getTime() / 86400000) + 3) / 7);\n\t}\n\t\n\tfunction getWeeklyData(dailyData) {\n\t    var result = [];\n\t\n\t    var lastWeek = getWeekOfDate(new Date(dailyData[0][0]));\n\t    var weekTotal = 0;\n\t    var record, date;\n\t\n\t    for (var i in dailyData) {\n\t        record = dailyData[i];\n\t        date = new Date(record[0]);\n\t        var week = getWeekOfDate(date);\n\t        if (lastWeek != week) {\n\t            result.push([new Date(((lastWeek * 7) - 3) * 86400000).getTime(), weekTotal]);\n\t            weekTotal = record[1];\n\t            lastWeek = week;\n\t        } else {\n\t            weekTotal += record[1];\n\t            if (i == dailyData.length - 1)\n\t                result.push([new Date(((week * 7) - 3) * 86400000).getTime(), weekTotal]);\n\t        }\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tvar months = ['Dec', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n\t    'Oct', 'Nov', 'Dec'];\n\t\n\tfunction getMonthlyData(dailyData) {\n\t    var result = {categories: [], data: []};\n\t\n\t    var lastMonth = new Date(dailyData[0][0]).getMonth();\n\t    var lastYear = new Date(dailyData[0][0]).getFullYear();\n\t    var monthTotal = 0;\n\t    var record, date;\n\t\n\t    for (var i = 0; i < dailyData.length; i++) {\n\t        record = dailyData[i];\n\t        date = new Date(record[0]);\n\t        if (lastMonth != date.getMonth()) {\n\t            result.categories.push(months[lastMonth + 1] + ' ' + lastYear);\n\t            result.data.push(monthTotal);\n\t            monthTotal = record[1];\n\t            lastMonth = date.getMonth();\n\t            lastYear = date.getFullYear();\n\t        } else {\n\t            monthTotal += record[1];\n\t            if (i == dailyData.length - 1) {\n\t                result.categories.push(months[date.getMonth() + 1] + ' ' + date.getFullYear());\n\t                result.data.push(monthTotal);\n\t            }\n\t        }\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction getAnnualData(dailyData) {\n\t    var result = {categories: [], data: []};\n\t\n\t    var lastYear = new Date(dailyData[0][0]).getFullYear();\n\t    var yearTotal = 0;\n\t    var record, date;\n\t\n\t    for (var i = 0; i < dailyData.length; i++) {\n\t        record = dailyData[i];\n\t        date = new Date(record[0]);\n\t        if (lastYear != date.getFullYear()) {\n\t            result.categories.push(lastYear.toString());\n\t            result.data.push(yearTotal);\n\t            yearTotal = record[1];\n\t            lastYear = date.getFullYear();\n\t        } else {\n\t            yearTotal += record[1];\n\t            if (i == dailyData.length - 1) {\n\t                result.categories.push(date.getFullYear().toString());\n\t                result.data.push(yearTotal);\n\t            }\n\t        }\n\t    }\n\t\n\t    return result;\n\t}\n\t\n\tfunction getPackageList(json) {\n\t    var result = [];\n\t    var len = json.rows.length;\n\t    for (var i = 0; i < len; i++) {\n\t        result.push(json.rows[i].key[1]);\n\t    }\n\t    return result;\n\t}\n\t\n\tfunction getData(url, callback) {\n\t    $.ajax({\n\t        url: url,\n\t        dataType: 'json',\n\t        success: callback,\n\t        error: function () {\n\t            console.log('Could not receive download data.');\n\t            $('#loading').html('An error occured. Please try to reload the page or contact me at '\n\t                + '<a href=\"mailto:paul@vorba.ch\">paul@vorba.ch</a> if that doesn\\'t help.');\n\t        }\n\t    });\n\t}\n\t\n\tfunction padNumberZero(x) {\n\t    return x < 10 ? '0' + x : x;\n\t}\n\t\n\tfunction dateToString(date) {\n\t    return date.getFullYear() + '-' + padNumberZero(date.getMonth() + 1) + '-'\n\t        + padNumberZero(date.getDate());\n\t}\n\t\n\tfunction downloadsUrl(pkg, from, to) {\n\t    return '/downloads/range/' + dateToString(from) + ':' + dateToString(to) + '/'\n\t        + encodeURIComponent(pkg);\n\t}\n\t\n\tfunction drawCharts(data) {\n\t    var dailyData = getDailyData(data);\n\t    $('#content').find('figure').css('min-width', dailyData.length * 2 + 67);\n\t    chart('days', 'column', 'Downloads per day', dailyData, 'datetime', 'Date');\n\t    var weeklyData = getWeeklyData(dailyData);\n\t    chart('weeks', 'column', 'Downloads per week', weeklyData, 'datetime', 'Week');\n\t    var monthlyData = getMonthlyData(dailyData);\n\t    chart('months', 'column', 'Downloads per month', monthlyData.data,\n\t        'linear', 'Month', monthlyData.categories);\n\t    var annualData = getAnnualData(dailyData);\n\t    chart('years', 'column', 'Downloads per year', annualData.data,\n\t        'linear', 'Year', annualData.categories);\n\t}\n\t\n\tfunction showPackageStats(packageName, fromDate, toDate) {\n\t    $('h2').append(' for package <em>' + packageName + '</em>');\n\t    $nameType.val('package');\n\t    $('#name').val(packageName);\n\t    $('#npm-stat').after('<p id=\"loading\"></p><p><a '\n\t        + 'href=\"https://npmjs.org/package/'\n\t        + packageName + '\">View package on npm</a></p>');\n\t\n\t    $('#loading').html('<img src=\"loading.gif\" />');\n\t\n\t    var url = downloadsUrl(packageName, fromDate, toDate);\n\t\n\t    getData(url, function (json) {\n\t        var data = sanitizeData(json);\n\t        $('h2').after('<p>Total number of downloads between <em>'\n\t            + dateToString(fromDate) + '</em> and <em>'\n\t            + dateToString(toDate) + '</em>: <strong>'\n\t            + totalDownloads(data) + '</strong></p>');\n\t\n\t        $('#loading').remove();\n\t\n\t        drawCharts(data);\n\t    });\n\t}\n\t\n\tfunction showAuthorStats(authorName, fromDate, toDate) {\n\t    $('h2').html('Downloads for author <em>' + authorName + '</em>');\n\t    $nameType.val('author');\n\t    $('#name').val(authorName);\n\t    $('#npm-stat').after('<p id=\"loading\"></p><p><a href=\"https://npmjs.org/~' + authorName\n\t        + '\">View author on npm</a></p>');\n\t\n\t    $('#loading').html('<img src=\"loading.gif\" />');\n\t\n\t    var url = '/-/_view/browseAuthors?group_level=3&start_key=[\"' + authorName + '\"]&end_key=[\"' + authorName + '\",{}]';\n\t\n\t    getData(url, function (json) {\n\t        var pkgs = getPackageList(json);\n\t        var len = pkgs.length;\n\t        var todo = len;\n\t\n\t        var all = {};\n\t        var totals = [];\n\t        for (var i = 0; i < len; i++) {\n\t            (function (pkg) {\n\t                var url = downloadsUrl(pkg, fromDate, toDate);\n\t                getData(url, function (json) {\n\t                    var sanitized = sanitizeData(json);\n\t\n\t                    for (var date in sanitized) {\n\t                        if (!all[date])\n\t                            all[date] = 0;\n\t\n\t                        all[date] += sanitized[date];\n\t                    }\n\t\n\t                    var total = totalDownloads(sanitized);\n\t                    totals.push({name: pkg, count: total});\n\t\n\t                    if (!--todo) {\n\t                        $('h2').after('<p>Cumulative downloads of packages by author <em>'\n\t                            + authorName + '</em> from <em>'\n\t                            + dateToString(fromDate) + '</em> to <em>'\n\t                            + dateToString(toDate) + '</em>: <strong>'\n\t                            + totalDownloads(all) + '</strong></p>');\n\t\n\t                        $('#loading').remove();\n\t\n\t                        totals = totals.sort(function (a, b) {\n\t                            return b.count.replace(/,/g, '') - a.count.replace(/,/g, '');\n\t                        });\n\t\n\t                        var $pkgs = $('#pkgs');\n\t                        $pkgs.append('<h3>Packages by <em>' + authorName + '</em></h3><table><tr><td>package name</td><td>downloads</td></tr></table>');\n\t                        for (var i = 0; i < totals.length; i++) {\n\t                            var t = totals[i];\n\t                            $pkgs.find('table').append('<tr><td><a href=\"charts.html?package='\n\t                                + t.name + '\" title=\"view detailed download statistics\">'\n\t                                + t.name + '</a></td><td>' + t.count + '</td></tr>');\n\t                        }\n\t\n\t                        drawCharts(all);\n\t                    }\n\t                });\n\t            })(pkgs[i]);\n\t        }\n\t    });\n\t}\n\t\n\tfunction initDate(urlParams, type, baseDate) {\n\t    var date;\n\t\n\t    if (!urlParams[type]) {\n\t        date = baseDate\n\t            ? new Date(baseDate.getTime() - (1000 * 60 * 60 * 24 * 365))\n\t            : new Date();\n\t    } else {\n\t        try {\n\t            date = new Date(urlParams[type]);\n\t        } catch (e) {\n\t            return alert('Invalid date format in URL parameter \"' + type + '\"');\n\t        }\n\t    }\n\t\n\t    $('input[name=\"' + type + '\"]').val(dateToString(date));\n\t\n\t    return date;\n\t}\n\t\n\t$(function () {\n\t    $('#nameType').replaceWith($nameType);\n\t    $('#from, #to').attr('title', 'If the date fields are omitted, you will see the data of the last 365 days.');\n\t\n\t    var urlParams = querystring.decode(window.location.search ? window.location.search.substring(1) : '');\n\t\n\t    var packageName = urlParams['package'];\n\t    var authorName = urlParams['author'];\n\t\n\t    if (!packageName && !authorName) {\n\t        return;\n\t    }\n\t\n\t    var toDate = initDate(urlParams, 'to');\n\t    var fromDate = initDate(urlParams, 'from', toDate);\n\t\n\t    if (packageName) {\n\t        $('title').html('npm-stat: ' + packageName);\n\t        showPackageStats(packageName, fromDate, toDate);\n\t    } else if (authorName) {\n\t        $('title').html('npm-stat: ' + authorName);\n\t        showAuthorStats(authorName, fromDate, toDate);\n\t    }\n\t});\n\t\n\twindow.submitForm = function submitForm() {\n\t\n\t    var formData = {};\n\t\n\t    var name = $('#name').val();\n\t\n\t    if ($nameType.val() == 'package') {\n\t        formData['package'] = name || 'clone';\n\t    } else if ($nameType.val() == 'author') {\n\t        formData['author'] = name || 'pvorb';\n\t    }\n\t\n\t    formData['from'] = $('#from').val();\n\t    formData['to'] = $('#to').val();\n\t\n\t    for (var key in formData) {\n\t        if (!formData[key]) {\n\t            delete formData[key];\n\t        }\n\t    }\n\t\n\t    window.location = '/charts.html?' + querystring.encode(formData);\n\t\n\t    return false;\n\t};\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\t'use strict';\n\t\n\t// If obj.hasOwnProperty has been overridden, then calling\n\t// obj.hasOwnProperty(prop) will break.\n\t// See: https://github.com/joyent/node/issues/1707\n\tfunction hasOwnProperty(obj, prop) {\n\t  return Object.prototype.hasOwnProperty.call(obj, prop);\n\t}\n\t\n\tmodule.exports = function(qs, sep, eq, options) {\n\t  sep = sep || '&';\n\t  eq = eq || '=';\n\t  var obj = {};\n\t\n\t  if (typeof qs !== 'string' || qs.length === 0) {\n\t    return obj;\n\t  }\n\t\n\t  var regexp = /\\+/g;\n\t  qs = qs.split(sep);\n\t\n\t  var maxKeys = 1000;\n\t  if (options && typeof options.maxKeys === 'number') {\n\t    maxKeys = options.maxKeys;\n\t  }\n\t\n\t  var len = qs.length;\n\t  // maxKeys <= 0 means that we should not limit keys count\n\t  if (maxKeys > 0 && len > maxKeys) {\n\t    len = maxKeys;\n\t  }\n\t\n\t  for (var i = 0; i < len; ++i) {\n\t    var x = qs[i].replace(regexp, '%20'),\n\t        idx = x.indexOf(eq),\n\t        kstr, vstr, k, v;\n\t\n\t    if (idx >= 0) {\n\t      kstr = x.substr(0, idx);\n\t      vstr = x.substr(idx + 1);\n\t    } else {\n\t      kstr = x;\n\t      vstr = '';\n\t    }\n\t\n\t    k = decodeURIComponent(kstr);\n\t    v = decodeURIComponent(vstr);\n\t\n\t    if (!hasOwnProperty(obj, k)) {\n\t      obj[k] = v;\n\t    } else if (Array.isArray(obj[k])) {\n\t      obj[k].push(v);\n\t    } else {\n\t      obj[k] = [obj[k], v];\n\t    }\n\t  }\n\t\n\t  return obj;\n\t};\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\t'use strict';\n\t\n\tvar stringifyPrimitive = function(v) {\n\t  switch (typeof v) {\n\t    case 'string':\n\t      return v;\n\t\n\t    case 'boolean':\n\t      return v ? 'true' : 'false';\n\t\n\t    case 'number':\n\t      return isFinite(v) ? v : '';\n\t\n\t    default:\n\t      return '';\n\t  }\n\t};\n\t\n\tmodule.exports = function(obj, sep, eq, name) {\n\t  sep = sep || '&';\n\t  eq = eq || '=';\n\t  if (obj === null) {\n\t    obj = undefined;\n\t  }\n\t\n\t  if (typeof obj === 'object') {\n\t    return Object.keys(obj).map(function(k) {\n\t      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n\t      if (Array.isArray(obj[k])) {\n\t        return obj[k].map(function(v) {\n\t          return ks + encodeURIComponent(stringifyPrimitive(v));\n\t        }).join(sep);\n\t      } else {\n\t        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n\t      }\n\t    }).join(sep);\n\t\n\t  }\n\t\n\t  if (!name) return '';\n\t  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n\t         encodeURIComponent(stringifyPrimitive(obj));\n\t};\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.decode = exports.parse = __webpack_require__(1);\n\texports.encode = exports.stringify = __webpack_require__(2);\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t// Object.keys polyfill\n\t// from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\n\tif (!Object.keys) {\n\t    Object.keys = (function () {\n\t        'use strict';\n\t        var hasOwnProperty = Object.prototype.hasOwnProperty,\n\t            hasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),\n\t            dontEnums = [\n\t                'toString',\n\t                'toLocaleString',\n\t                'valueOf',\n\t                'hasOwnProperty',\n\t                'isPrototypeOf',\n\t                'propertyIsEnumerable',\n\t                'constructor'\n\t            ],\n\t            dontEnumsLength = dontEnums.length;\n\t\n\t        return function (obj) {\n\t            if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {\n\t                throw new TypeError('Object.keys called on non-object');\n\t            }\n\t\n\t            var result = [], prop, i;\n\t\n\t            for (prop in obj) {\n\t                if (hasOwnProperty.call(obj, prop)) {\n\t                    result.push(prop);\n\t                }\n\t            }\n\t\n\t            if (hasDontEnumBug) {\n\t                for (i = 0; i < dontEnumsLength; i++) {\n\t                    if (hasOwnProperty.call(obj, dontEnums[i])) {\n\t                        result.push(dontEnums[i]);\n\t                    }\n\t                }\n\t            }\n\t            return result;\n\t        };\n\t    }());\n\t}\n\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** charts.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 286344a8dc12b1fd0bb6\n **/","/*!\n * (c) 2012-2016 Paul Vorbach.\n *\n * MIT License (https://vorba.ch/license/mit.html)\n */\n\nvar querystring = require('querystring');\n\nrequire('./object-keys-polyfill.js');\n\nvar $nameType = $('<select id=\"nameType\">\\n'\n    + '    <option value=\"package\" selected>Package</option>\\n'\n    + '    <option value=\"author\">Author</option>\\n'\n    + '</select>');\n\n$nameType.change(function () {\n    if ($nameType.val() == 'package') {\n        $('#name').attr('name', 'package').attr('placeholder', 'package name');\n    } else if ($nameType.val() == 'author') {\n        $('#name').attr('name', 'author').attr('placeholder', 'author name');\n    }\n});\n\nfunction chart(id, type, title, data, xAxisType, xAxisTitle, cats) {\n    return new Highcharts.Chart({\n        chart: {\n            renderTo: id,\n            zoomType: 'x',\n            type: type\n        },\n        title: {\n            text: title,\n            style: {\n                color: '#000000'\n            }\n        },\n        subtitle: {\n            text: typeof document.ontouchstart == 'undefined' ?\n                'Click and drag in the plot to zoom in' :\n                'Drag your finger over the plot to zoom in',\n            style: {\n                color: '#000000'\n            }\n        },\n        exporting: {\n            enableImages: true\n        },\n        credits: {\n            enabled: false\n        },\n        xAxis: (xAxisType == 'datetime' ? {\n            type: xAxisType,\n            maxZoom: 14 * 24 * 60 * 60 * 1000,\n            lineColor: '#000000',\n            title: {\n                text: xAxisTitle,\n                style: {\n                    color: '#000000'\n                }\n            }\n        } : {\n            type: xAxisType,\n            lineColor: '#000000',\n            categories: cats,\n            title: {\n                text: xAxisTitle,\n                style: {\n                    color: '#000000'\n                }\n            }\n        }),\n        yAxis: {\n            min: 0,\n            startOnTick: false,\n            showFirstLabel: false,\n            title: {\n                text: 'Downloads',\n                style: {\n                    color: '#000000'\n                }\n            }\n        },\n        tooltip: {\n            shared: true\n        },\n        legend: {\n            enabled: false\n        },\n        plotOptions: {\n            column: {\n                borderWidth: 0,\n                color: '#AA0000',\n                pointPadding: 0,\n                shadow: false\n            },\n            line: {\n                color: '#AA0000',\n                lineWidth: 1,\n                marker: {\n                    radius: 2\n                }\n            }\n        },\n        series: [{\n            name: 'Downloads',\n            data: data\n        }]\n    });\n}\n\nfunction totalDownloads(data) {\n    var result = 0;\n    for (var date in data) {\n        result += data[date];\n    }\n    return result.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n}\n\nfunction sanitizeData(json) {\n    var result = {};\n    var data = json.downloads;\n\n    var date = null;\n    if (data) {\n        for (var i = 0; i < data.length; i++) {\n            date = data[i].day;\n            result[date] = data[i].downloads;\n        }\n    }\n\n    return result;\n}\n\nfunction getDailyData(data) {\n    var result = [];\n\n    var keys = Object.keys(data).sort();\n    for (var i = 0; i < keys.length; i++) {\n        result.push([new Date(keys[i]).getTime(), data[keys[i]]]);\n    }\n\n    return result;\n}\n\nfunction getWeekOfDate(d) {\n    return Math.floor(((d.getTime() / 86400000) + 3) / 7);\n}\n\nfunction getWeeklyData(dailyData) {\n    var result = [];\n\n    var lastWeek = getWeekOfDate(new Date(dailyData[0][0]));\n    var weekTotal = 0;\n    var record, date;\n\n    for (var i in dailyData) {\n        record = dailyData[i];\n        date = new Date(record[0]);\n        var week = getWeekOfDate(date);\n        if (lastWeek != week) {\n            result.push([new Date(((lastWeek * 7) - 3) * 86400000).getTime(), weekTotal]);\n            weekTotal = record[1];\n            lastWeek = week;\n        } else {\n            weekTotal += record[1];\n            if (i == dailyData.length - 1)\n                result.push([new Date(((week * 7) - 3) * 86400000).getTime(), weekTotal]);\n        }\n    }\n\n    return result;\n}\n\nvar months = ['Dec', 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n    'Oct', 'Nov', 'Dec'];\n\nfunction getMonthlyData(dailyData) {\n    var result = {categories: [], data: []};\n\n    var lastMonth = new Date(dailyData[0][0]).getMonth();\n    var lastYear = new Date(dailyData[0][0]).getFullYear();\n    var monthTotal = 0;\n    var record, date;\n\n    for (var i = 0; i < dailyData.length; i++) {\n        record = dailyData[i];\n        date = new Date(record[0]);\n        if (lastMonth != date.getMonth()) {\n            result.categories.push(months[lastMonth + 1] + ' ' + lastYear);\n            result.data.push(monthTotal);\n            monthTotal = record[1];\n            lastMonth = date.getMonth();\n            lastYear = date.getFullYear();\n        } else {\n            monthTotal += record[1];\n            if (i == dailyData.length - 1) {\n                result.categories.push(months[date.getMonth() + 1] + ' ' + date.getFullYear());\n                result.data.push(monthTotal);\n            }\n        }\n    }\n\n    return result;\n}\n\nfunction getAnnualData(dailyData) {\n    var result = {categories: [], data: []};\n\n    var lastYear = new Date(dailyData[0][0]).getFullYear();\n    var yearTotal = 0;\n    var record, date;\n\n    for (var i = 0; i < dailyData.length; i++) {\n        record = dailyData[i];\n        date = new Date(record[0]);\n        if (lastYear != date.getFullYear()) {\n            result.categories.push(lastYear.toString());\n            result.data.push(yearTotal);\n            yearTotal = record[1];\n            lastYear = date.getFullYear();\n        } else {\n            yearTotal += record[1];\n            if (i == dailyData.length - 1) {\n                result.categories.push(date.getFullYear().toString());\n                result.data.push(yearTotal);\n            }\n        }\n    }\n\n    return result;\n}\n\nfunction getPackageList(json) {\n    var result = [];\n    var len = json.rows.length;\n    for (var i = 0; i < len; i++) {\n        result.push(json.rows[i].key[1]);\n    }\n    return result;\n}\n\nfunction getData(url, callback) {\n    $.ajax({\n        url: url,\n        dataType: 'json',\n        success: callback,\n        error: function () {\n            console.log('Could not receive download data.');\n            $('#loading').html('An error occured. Please try to reload the page or contact me at '\n                + '<a href=\"mailto:paul@vorba.ch\">paul@vorba.ch</a> if that doesn\\'t help.');\n        }\n    });\n}\n\nfunction padNumberZero(x) {\n    return x < 10 ? '0' + x : x;\n}\n\nfunction dateToString(date) {\n    return date.getFullYear() + '-' + padNumberZero(date.getMonth() + 1) + '-'\n        + padNumberZero(date.getDate());\n}\n\nfunction downloadsUrl(pkg, from, to) {\n    return '/downloads/range/' + dateToString(from) + ':' + dateToString(to) + '/'\n        + encodeURIComponent(pkg);\n}\n\nfunction drawCharts(data) {\n    var dailyData = getDailyData(data);\n    $('#content').find('figure').css('min-width', dailyData.length * 2 + 67);\n    chart('days', 'column', 'Downloads per day', dailyData, 'datetime', 'Date');\n    var weeklyData = getWeeklyData(dailyData);\n    chart('weeks', 'column', 'Downloads per week', weeklyData, 'datetime', 'Week');\n    var monthlyData = getMonthlyData(dailyData);\n    chart('months', 'column', 'Downloads per month', monthlyData.data,\n        'linear', 'Month', monthlyData.categories);\n    var annualData = getAnnualData(dailyData);\n    chart('years', 'column', 'Downloads per year', annualData.data,\n        'linear', 'Year', annualData.categories);\n}\n\nfunction showPackageStats(packageName, fromDate, toDate) {\n    $('h2').append(' for package <em>' + packageName + '</em>');\n    $nameType.val('package');\n    $('#name').val(packageName);\n    $('#npm-stat').after('<p id=\"loading\"></p><p><a '\n        + 'href=\"https://npmjs.org/package/'\n        + packageName + '\">View package on npm</a></p>');\n\n    $('#loading').html('<img src=\"loading.gif\" />');\n\n    var url = downloadsUrl(packageName, fromDate, toDate);\n\n    getData(url, function (json) {\n        var data = sanitizeData(json);\n        $('h2').after('<p>Total number of downloads between <em>'\n            + dateToString(fromDate) + '</em> and <em>'\n            + dateToString(toDate) + '</em>: <strong>'\n            + totalDownloads(data) + '</strong></p>');\n\n        $('#loading').remove();\n\n        drawCharts(data);\n    });\n}\n\nfunction showAuthorStats(authorName, fromDate, toDate) {\n    $('h2').html('Downloads for author <em>' + authorName + '</em>');\n    $nameType.val('author');\n    $('#name').val(authorName);\n    $('#npm-stat').after('<p id=\"loading\"></p><p><a href=\"https://npmjs.org/~' + authorName\n        + '\">View author on npm</a></p>');\n\n    $('#loading').html('<img src=\"loading.gif\" />');\n\n    var url = '/-/_view/browseAuthors?group_level=3&start_key=[\"' + authorName + '\"]&end_key=[\"' + authorName + '\",{}]';\n\n    getData(url, function (json) {\n        var pkgs = getPackageList(json);\n        var len = pkgs.length;\n        var todo = len;\n\n        var all = {};\n        var totals = [];\n        for (var i = 0; i < len; i++) {\n            (function (pkg) {\n                var url = downloadsUrl(pkg, fromDate, toDate);\n                getData(url, function (json) {\n                    var sanitized = sanitizeData(json);\n\n                    for (var date in sanitized) {\n                        if (!all[date])\n                            all[date] = 0;\n\n                        all[date] += sanitized[date];\n                    }\n\n                    var total = totalDownloads(sanitized);\n                    totals.push({name: pkg, count: total});\n\n                    if (!--todo) {\n                        $('h2').after('<p>Cumulative downloads of packages by author <em>'\n                            + authorName + '</em> from <em>'\n                            + dateToString(fromDate) + '</em> to <em>'\n                            + dateToString(toDate) + '</em>: <strong>'\n                            + totalDownloads(all) + '</strong></p>');\n\n                        $('#loading').remove();\n\n                        totals = totals.sort(function (a, b) {\n                            return b.count.replace(/,/g, '') - a.count.replace(/,/g, '');\n                        });\n\n                        var $pkgs = $('#pkgs');\n                        $pkgs.append('<h3>Packages by <em>' + authorName + '</em></h3><table><tr><td>package name</td><td>downloads</td></tr></table>');\n                        for (var i = 0; i < totals.length; i++) {\n                            var t = totals[i];\n                            $pkgs.find('table').append('<tr><td><a href=\"charts.html?package='\n                                + t.name + '\" title=\"view detailed download statistics\">'\n                                + t.name + '</a></td><td>' + t.count + '</td></tr>');\n                        }\n\n                        drawCharts(all);\n                    }\n                });\n            })(pkgs[i]);\n        }\n    });\n}\n\nfunction initDate(urlParams, type, baseDate) {\n    var date;\n\n    if (!urlParams[type]) {\n        date = baseDate\n            ? new Date(baseDate.getTime() - (1000 * 60 * 60 * 24 * 365))\n            : new Date();\n    } else {\n        try {\n            date = new Date(urlParams[type]);\n        } catch (e) {\n            return alert('Invalid date format in URL parameter \"' + type + '\"');\n        }\n    }\n\n    $('input[name=\"' + type + '\"]').val(dateToString(date));\n\n    return date;\n}\n\n$(function () {\n    $('#nameType').replaceWith($nameType);\n    $('#from, #to').attr('title', 'If the date fields are omitted, you will see the data of the last 365 days.');\n\n    var urlParams = querystring.decode(window.location.search ? window.location.search.substring(1) : '');\n\n    var packageName = urlParams['package'];\n    var authorName = urlParams['author'];\n\n    if (!packageName && !authorName) {\n        return;\n    }\n\n    var toDate = initDate(urlParams, 'to');\n    var fromDate = initDate(urlParams, 'from', toDate);\n\n    if (packageName) {\n        $('title').html('npm-stat: ' + packageName);\n        showPackageStats(packageName, fromDate, toDate);\n    } else if (authorName) {\n        $('title').html('npm-stat: ' + authorName);\n        showAuthorStats(authorName, fromDate, toDate);\n    }\n});\n\nwindow.submitForm = function submitForm() {\n\n    var formData = {};\n\n    var name = $('#name').val();\n\n    if ($nameType.val() == 'package') {\n        formData['package'] = name || 'clone';\n    } else if ($nameType.val() == 'author') {\n        formData['author'] = name || 'pvorb';\n    }\n\n    formData['from'] = $('#from').val();\n    formData['to'] = $('#to').val();\n\n    for (var key in formData) {\n        if (!formData[key]) {\n            delete formData[key];\n        }\n    }\n\n    window.location = '/charts.html?' + querystring.encode(formData);\n\n    return false;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/charts.js\n ** module id = 0\n ** module chunks = 0\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/querystring/decode.js\n ** module id = 1\n ** module chunks = 0\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return Object.keys(obj).map(function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (Array.isArray(obj[k])) {\n        return obj[k].map(function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/querystring/encode.js\n ** module id = 2\n ** module chunks = 0\n **/","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/querystring/index.js\n ** module id = 3\n ** module chunks = 0\n **/","// Object.keys polyfill\n// from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\nif (!Object.keys) {\n    Object.keys = (function () {\n        'use strict';\n        var hasOwnProperty = Object.prototype.hasOwnProperty,\n            hasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),\n            dontEnums = [\n                'toString',\n                'toLocaleString',\n                'valueOf',\n                'hasOwnProperty',\n                'isPrototypeOf',\n                'propertyIsEnumerable',\n                'constructor'\n            ],\n            dontEnumsLength = dontEnums.length;\n\n        return function (obj) {\n            if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {\n                throw new TypeError('Object.keys called on non-object');\n            }\n\n            var result = [], prop, i;\n\n            for (prop in obj) {\n                if (hasOwnProperty.call(obj, prop)) {\n                    result.push(prop);\n                }\n            }\n\n            if (hasDontEnumBug) {\n                for (i = 0; i < dontEnumsLength; i++) {\n                    if (hasOwnProperty.call(obj, dontEnums[i])) {\n                        result.push(dontEnums[i]);\n                    }\n                }\n            }\n            return result;\n        };\n    }());\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/object-keys-polyfill.js\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}