!function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return t[a].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function a(t,e){for(var n=[],a=moment(t).startOf("day"),r=moment(e).startOf("day");a.isSameOrBefore(r);)n.push(a.toDate()),a=a.add(1,"days");return n}function r(t,e,n,a,r,o){var i=$.map(n,function(t,e){return{name:e,data:t,type:"spline"}});new Highcharts.Chart({chart:{renderTo:t,zoomType:"x"},colors:["#CC333F","#00A0B0","#73AC42","#EB6841","#542437"],title:{text:e,style:{color:"#000000"}},subtitle:{text:"undefined"==typeof document.ontouchstart?"Click and drag in the plot to zoom in":"Drag your finger over the plot to zoom in",style:{color:"#000000"}},exporting:{enableImages:!0},credits:{enabled:!1},xAxis:"datetime"==a?{type:a,maxZoom:12096e5,lineColor:"#000000",title:{text:r,style:{color:"#000000"}}}:{type:a,lineColor:"#000000",categories:o,labels:{rotation:-20},title:{text:r,style:{color:"#000000"}}},yAxis:{min:0,startOnTick:!1,showFirstLabel:!1,title:{text:"Downloads",style:{color:"#000000"}}},tooltip:{shared:!0},legend:{enabled:i.length>1},plotOptions:{spline:{marker:{radius:1.5},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},series:i})}function o(t){var e=0;return $.each(t,function(t,n){e+=n}),e}function i(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function c(t){var e={},n=t.downloads,a=null;if(n)for(var r=0;r<n.length;r++)a=n[r].day,e[a]=n[r].downloads;return e}function l(t,e){var n={};return $.each(t,function(t,a){for(var r=[],o=0;o<e.length;o++){var i=u(e[o]),c=moment(e[o]).startOf("day").valueOf();r.push([c,a[i]||0])}n[t]=r}),n}function u(t){return moment(t).format("YYYY-MM-DD")}function s(t){return moment(t).format("GGGG-[W]WW")}function p(t){return moment(t).format("MMM YYYY")}function f(t){return moment(t).format("YYYY")}function d(t,e,n,a){var r={},o=null,i={};$.each(t,function(t,a){for(var c=[],l=0,s=null,p=0;p<e.length;p++){var f=u(e[p]),d=n(e[p]);null!==i&&(i[d]=!0),d!==s&&null!==s&&(c.push({name:s,y:l}),l=0),l+=a[f]||0,s=d,p===e.length-1&&c.push({name:d,y:l})}null!==i&&(o=Object.keys(i)),i=null,r[t]=c});for(var c=0;c<o.length;c++)c%a!=0&&(o[c]=" ");return{data:r,xAxisLabels:o}}function m(t){for(var e=[],n=t.rows.length,a=0;a<n;a++)e.push(t.rows[a].key[1]);return e}function h(t){return $.ajax({url:t,dataType:"json"})}function v(t,e,n){return"/downloads/range/"+u(e)+":"+u(n)+"/"+encodeURIComponent(t)}function g(t){var e={};return $.each(t,function(t,n){$.each(n,function(t,n){"undefined"!=typeof e[t]?e[t]=e[t]+n:e[t]=n})}),{total:e}}function y(t,e,n){var o=a(e,n),i=l(t,o);r("days","Downloads per day",i,"datetime","Date");var c=d(t,o,s,4);r("weeks","Downloads per week",c.data,"categories","Week",c.xAxisLabels);var u=d(t,o,p,1);r("months","Downloads per month",u.data,"categories","Month",u.xAxisLabels);var m=d(t,o,f,1);r("years","Downloads per year",m.data,"categories","Year",m.xAxisLabels)}function w(t,e,n,a){var r=0,c=$('<table class="alternating"><tr><td>package</td><td>downloads</td></tr></table>'),l=$.map(t,function(t,e){var n=o(t);return a&&(r+=n),{packageName:e,downloads:n}}),s=l.sort(function(t,e){return e.downloads-t.downloads});$.each(s,function(t,r){var o;o=a?'<a href="charts.html?package='+r.packageName+"&from="+u(e)+"&to="+u(n)+'">'+r.packageName+"</a>":r.packageName,c.append("<tr><td>"+o+"</td><td>"+i(r.downloads)+"</td></tr>")}),a&&c.append("<tr><td><strong>Î£</strong></td><td><strong>"+i(r)+"</strong></td></tr>"),$("#pkgs").after(c).after("<p>Total number of downloads between <em>"+u(e)+"</em> and <em>"+u(n)+"</em>:")}function b(t,e,n){var a=t.join(", ");if($("h2").append(" for package"+(t.length>1?"s":"")+" <em>"+a+"</em>"),A.val("package"),$("#name").attr("name","package").val(a),t.length>5)return void window.alert("You cannot compare more than 5 packages at once.");var r=$("#npm-stat");r.after('<p id="loading"><img src="loading.gif" /></p>'),1==t.length&&r.after('<p><a href="https://npmjs.org/package/'+t+'">View package on npm</a></p>');var o={},i=[];$.each(t,function(t,a){var r=v(a,e,n),c=h(r);o[a]=c,i.push(c)}),$.when.apply(this,i).then(function(){var a={};1==t.length?a[t[0]]=arguments[0]:$.each(arguments,function(e,n){a[t[e]]=n[0]});var r={};$.each(a,function(t,e){r[t]=c(e)}),$("#loading").remove(),w(r,e,n,!1),y(r,e,n)})}function k(t,e,n){$("h2").html("Downloads for author <em>"+t+"</em>"),A.val("author"),$("#name").attr("name","author").val(t),$("#npm-stat").after('<p id="loading"></p><p><a href="https://npmjs.org/~'+t+'">View author on npm</a></p>'),$("#loading").html('<img src="loading.gif" />'),x(t).then(function(t){var a=m(t),r={},o=[];$.each(a,function(t,a){var i=v(a,e,n),c=h(i);r[a]=c,o.push(c)}),$.when.apply(this,o).then(function(){var t={};1==a.length?t[a[0]]=arguments[0]:$.each(arguments,function(e,n){t[a[e]]=n[0]});var r={};$.each(t,function(t,e){r[t]=c(e)}),$("#loading").remove(),w(r,e,n,!0);var o=g(r);y(o,e,n)})})}function x(t){var e='/-/_view/browseAuthors?group_level=3&start_key=["'+t+'"]&end_key=["'+t+'",{}]';return h(e)}function O(t,e,n){var a;return a=t[e]?moment(t[e]).startOf("day"):n?moment(n).startOf("day").subtract(1,"year"):moment().startOf("day"),a.isValid()?(a=a.toDate(),$('input[name="'+e+'"]').val(u(a)),a):void alert('Invalid date format in URL parameter "'+e+'"')}/*!
	 * (c) 2012-2016 Paul Vorbach.
	 *
	 * MIT License (https://vorba.ch/license/mit.html)
	 */
var j=n(3);n(4);var A=$('<select id="nameType">\n    <option value="package" selected>Package</option>\n    <option value="author">Author</option>\n</select>');A.change(function(){"package"==A.val()?$("#name").attr("name","package").attr("placeholder","package name(s) (comma separated)"):"author"==A.val()&&$("#name").attr("name","author").attr("placeholder","author name")}),$(function(){$("#nameType").replaceWith(A),$("#from, #to").attr("title","If the date fields are omitted, you will see the data of the past year.");var t=j.decode(window.location.search?window.location.search.substring(1):""),e=t["package"],n=$(t.author).text();if(e||n){var a=O(t,"to"),r=O(t,"from",a);e?(e instanceof Array||(e=[e]),e=$.map(e,function(t){return $(t.trim()).text()}),$("title").html("npm-stat: "+e.join(", ")),b(e,r,a)):n&&($("title").html("npm-stat: "+n),k(n,r,a))}}),window.submitForm=function(){var t={};if("package"==A.val()){var e=$("input[name=package]").val().split(",");e.length>=1&&""!==e[0].trim()?t["package"]=$.map(e,function(t){return t.trim()}):t["package"]=["clone"]}else if("author"==A.val()){var n=$("input[name=author]").val();t.author=n||"pvorb"}t.from=$("#from").val(),t.to=$("#to").val();for(var a in t)t[a]||delete t[a];return window.location="/charts.html?"+j.encode(t),!1}},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,o){e=e||"&",r=r||"=";var i={};if("string"!=typeof t||0===t.length)return i;var c=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var u=t.length;l>0&&u>l&&(u=l);for(var s=0;s<u;++s){var p,f,d,m,h=t[s].replace(c,"%20"),v=h.indexOf(r);v>=0?(p=h.substr(0,v),f=h.substr(v+1)):(p=h,f=""),d=decodeURIComponent(p),m=decodeURIComponent(f),n(i,d)?a(i[d])?i[d].push(m):i[d]=[i[d],m]:i[d]=m}return i};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e){"use strict";function n(t,e){if(t.map)return t.map(e);for(var n=[],a=0;a<t.length;a++)n.push(e(t[a],a));return n}var a=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,c){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(o(t),function(o){var c=encodeURIComponent(a(o))+i;return r(t[o])?n(t[o],function(t){return c+encodeURIComponent(a(t))}).join(e):c+encodeURIComponent(a(t[o]))}).join(e):c?encodeURIComponent(a(c))+i+encodeURIComponent(a(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){"use strict";e.decode=e.parse=n(1),e.encode=e.stringify=n(2)},function(t,e){Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=n.length;return function(r){if("object"!=typeof r&&("function"!=typeof r||null===r))throw new TypeError("Object.keys called on non-object");var o,i,c=[];for(o in r)t.call(r,o)&&c.push(o);if(e)for(i=0;i<a;i++)t.call(r,n[i])&&c.push(n[i]);return c}}())}]);
//# sourceMappingURL=charts.js.map