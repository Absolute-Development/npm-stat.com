!function(t){function e(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return t[a].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){function a(t,e){for(var n=[],a=moment(t).set("hours",0).set("minutes",0);a.toDate()<=e;)n.push(a.toDate()),a=a.add(1,"days");return n}function o(t,e,n,a,o,r){var i=$.map(n,function(t,e){return{name:e,data:t,type:"spline"}});new Highcharts.Chart({chart:{renderTo:t,zoomType:"x"},colors:["#CC333F","#00A0B0","#73AC42","#EB6841","#542437"],title:{text:e,style:{color:"#000000"}},subtitle:{text:"undefined"==typeof document.ontouchstart?"Click and drag in the plot to zoom in":"Drag your finger over the plot to zoom in",style:{color:"#000000"}},exporting:{enableImages:!0},credits:{enabled:!1},xAxis:"datetime"==a?{type:a,maxZoom:12096e5,lineColor:"#000000",title:{text:o,style:{color:"#000000"}}}:{type:a,lineColor:"#000000",categories:r,labels:{rotation:-20},title:{text:o,style:{color:"#000000"}}},yAxis:{min:0,startOnTick:!1,showFirstLabel:!1,title:{text:"Downloads",style:{color:"#000000"}}},tooltip:{shared:!0},legend:{enabled:i.length>1},plotOptions:{spline:{marker:{radius:1.5},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null}},series:i})}function r(t){var e=0;return $.each(t,function(t,n){e+=n}),e}function i(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function l(t){var e={},n=t.downloads,a=null;if(n)for(var o=0;o<n.length;o++)a=n[o].day,e[a]=n[o].downloads;return e}function c(t,e){var n={};return $.each(t,function(t,a){for(var o=[],r=0;r<e.length;r++){var i=u(e[r]),l=moment(e[r]).utc().add(1,"day").set({hour:0,minute:0,second:0}).toDate().getTime();o.push([l,a[i]||0])}n[t]=o}),n}function u(t){return moment(t).format("YYYY-MM-DD")}function s(t){return moment(t).format("GGGG-[W]WW")}function p(t){return moment(t).format("MMM YYYY")}function d(t){return moment(t).format("YYYY")}function f(t,e,n,a){var o={},r=null,i={};$.each(t,function(t,a){for(var l=[],c=0,s=null,p=0;p<e.length;p++){var d=u(e[p]),f=n(e[p]);null!==i&&(i[f]=!0),f!==s&&null!==s&&(l.push({name:s,y:c}),c=0),c+=a[d]||0,s=f,p===e.length-1&&l.push({name:f,y:c})}null!==i&&(r=Object.keys(i)),i=null,o[t]=l});for(var l=0;l<r.length;l++)l%a!=0&&(r[l]=" ");return{data:o,xAxisLabels:r}}function m(t){for(var e=[],n=t.rows.length,a=0;a<n;a++)e.push(t.rows[a].key[1]);return e}function h(t){return $.ajax({url:t,dataType:"json"})}function v(t,e,n){return"/downloads/range/"+u(e)+":"+u(n)+"/"+encodeURIComponent(t)}function g(t){var e={};return $.each(t,function(t,n){$.each(n,function(t,n){"undefined"!=typeof e[t]?e[t]=e[t]+n:e[t]=n})}),{total:e}}function y(t,e,n){var r=a(e,n),i=c(t,r);o("days","Downloads per day",i,"datetime","Date");var l=f(t,r,s,4);o("weeks","Downloads per week",l.data,"categories","Week",l.xAxisLabels);var u=f(t,r,p,1);o("months","Downloads per month",u.data,"categories","Month",u.xAxisLabels);var m=f(t,r,d,1);o("years","Downloads per year",m.data,"categories","Year",m.xAxisLabels)}function w(t,e,n,a){var o=0,l=$('<table class="alternating"><tr><td>package</td><td>downloads</td></tr></table>'),c=$.map(t,function(t,e){var n=r(t);return a&&(o+=n),{packageName:e,downloads:n}}),s=c.sort(function(t,e){return e.downloads-t.downloads});$.each(s,function(t,e){l.append("<tr><td>"+e.packageName+"</td><td>"+i(e.downloads)+"</td></tr>")}),a&&l.append("<tr><td><strong>Î£</strong></td><td><strong>"+i(o)+"</strong></td></tr>"),$("#npm-stat").after(l).after("<p>Total number of downloads between <em>"+u(e)+"</em> and <em>"+u(n)+"</em>:")}function b(t,e,n){var a=t.join(", ");if($("h2").append(" for package"+(t.length>1?"s":"")+" <em>"+a+"</em>"),Y.val("package"),$("#name").val(a),t.length>5)return void window.alert("You cannot compare more than 5 packages at once.");var o=$("#npm-stat");o.after('<p id="loading"><img src="loading.gif" /></p>'),1==t.length&&o.after('<p><a href="https://npmjs.org/package/'+t+'">View package on npm</a></p>');var r={},i=[];$.each(t,function(t,a){var o=v(a,e,n),l=h(o);r[a]=l,i.push(l)}),$.when.apply(this,i).then(function(){var a={};1==t.length?a[t[0]]=arguments[0]:$.each(arguments,function(e,n){a[t[e]]=n[0]});var o={};$.each(a,function(t,e){o[t]=l(e)}),$("#loading").remove(),w(o,e,n,!1),y(o,e,n)})}function k(t,e,n){$("h2").html("Downloads for author <em>"+t+"</em>"),Y.val("author"),$("#name").val(t),$("#npm-stat").after('<p id="loading"></p><p><a href="https://npmjs.org/~'+t+'">View author on npm</a></p>'),$("#loading").html('<img src="loading.gif" />'),x(t).then(function(t){var a=m(t),o={},r=[];$.each(a,function(t,a){var i=v(a,e,n),l=h(i);o[a]=l,r.push(l)}),$.when.apply(this,r).then(function(){var t={};1==a.length?t[a[0]]=arguments[0]:$.each(arguments,function(e,n){t[a[e]]=n[0]});var o={};$.each(t,function(t,e){o[t]=l(e)}),$("#loading").remove(),w(o,e,n,!0);var r=g(o);y(r,e,n)})})}function x(t){var e='/-/_view/browseAuthors?group_level=3&start_key=["'+t+'"]&end_key=["'+t+'",{}]';return h(e)}function j(t,e,n){var a;if(t[e])try{a=moment(t[e],"YYYY-MM-DD").utcOffset(-480).toDate()}catch(o){return alert('Invalid date format in URL parameter "'+e+'"')}else a=n?moment(n).subtract(1,"year").toDate():moment().utc().subtract(36,"hours").toDate();return $('input[name="'+e+'"]').val(u(a)),a}/*!
	 * (c) 2012-2016 Paul Vorbach.
	 *
	 * MIT License (https://vorba.ch/license/mit.html)
	 */
var D=n(3);n(4);var Y=$('<select id="nameType">\n    <option value="package" selected>Package</option>\n    <option value="author">Author</option>\n</select>');Y.change(function(){"package"==Y.val()?$("#name").attr("name","package").attr("placeholder","package name(s) (comma separated)"):"author"==Y.val()&&$("#name").attr("name","author").attr("placeholder","author name")}),$(function(){$("#nameType").replaceWith(Y),$("#from, #to").attr("title","If the date fields are omitted, you will see the data of the past year.");var t=D.decode(window.location.search?window.location.search.substring(1):""),e=t["package"],n=t.author;if(e||n){var a=j(t,"to"),o=j(t,"from",a);e?(e instanceof Array||(e=[e]),e=$.map(e,function(t){return t.trim()}),$("title").html("npm-stat: "+e.join(", ")),b(e,o,a)):n&&($("title").html("npm-stat: "+n),k(n,o,a))}}),window.submitForm=function(){var t={};if("package"==Y.val()){var e=$("input[name=package]").val().split(",");e.length>=1&&""!==e[0].trim()?t["package"]=$.map(e,function(t){return t.trim()}):t["package"]=["clone"]}else if("author"==Y.val()){var n=$("input[name=author]").val();t.author=n||"pvorb"}t.from=$("#from").val(),t.to=$("#to").val();for(var a in t)t[a]||delete t[a];return window.location="/charts.html?"+D.encode(t),!1}},function(t,e){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,a,o){e=e||"&",a=a||"=";var r={};if("string"!=typeof t||0===t.length)return r;var i=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=t.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var s,p,d,f,m=t[u].replace(i,"%20"),h=m.indexOf(a);h>=0?(s=m.substr(0,h),p=m.substr(h+1)):(s=m,p=""),d=decodeURIComponent(s),f=decodeURIComponent(p),n(r,d)?Array.isArray(r[d])?r[d].push(f):r[d]=[r[d],f]:r[d]=f}return r}},function(t,e){"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,a,o){return e=e||"&",a=a||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(o){var r=encodeURIComponent(n(o))+a;return Array.isArray(t[o])?t[o].map(function(t){return r+encodeURIComponent(n(t))}).join(e):r+encodeURIComponent(n(t[o]))}).join(e):o?encodeURIComponent(n(o))+a+encodeURIComponent(n(t)):""}},function(t,e,n){"use strict";e.decode=e.parse=n(1),e.encode=e.stringify=n(2)},function(t,e){Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var r,i,l=[];for(r in o)t.call(o,r)&&l.push(r);if(e)for(i=0;i<a;i++)t.call(o,n[i])&&l.push(n[i]);return l}}())}]);
//# sourceMappingURL=charts.js.map